<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr·∫Øc Nghi·ªám L·ªãch S·ª≠ ƒê·ªãa Ph∆∞∆°ng 11</title>
    <!-- T·∫£i Tailwind CSS v√† font Inter -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        /* Thi·∫øt l·∫≠p font Inter, m√†u n·ªÅn nh·∫π nh√†ng */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Xanh nh·∫°t */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            font-size: 18px; 
        }

        /* Th·∫ª bao ngo√†i ch√≠nh (Cartoon look) */
        .card {
            background-color: #ffffff;
            border: 4px solid #3b82f6; /* Vi·ªÅn xanh ƒë·∫≠m, d√†y */
            border-radius: 16px;
            box-shadow: 10px 10px 0px rgba(59, 130, 246, 0.7); /* Hi·ªáu ·ª©ng n·ªïi b·∫≠t */
            transition: all 0.2s;
        }

        /* Ti√™u ƒë·ªÅ */
        .header-title {
            color: #1e3a8a; /* Xanh Navy */
            font-weight: 800;
            text-shadow: 2px 2px 0px #bfdbfe; /* B√≥ng ƒë·ªï nh·∫π cho ch·ªØ */
        }
        
        /* Th·∫ª c√¢u h·ªèi */
        .question-card {
            background-color: #fff;
            border: 2px solid #93c5fd; /* Vi·ªÅn xanh nh·∫°t */
            border-radius: 12px;
            box-shadow: 4px 4px 0px rgba(147, 197, 253, 0.7);
            padding: 20px;
        }
        
        /* T√πy ch·ªçn ƒë√°p √°n */
        .answer-option {
            cursor: pointer;
            border: 2px solid #a78bfa; /* M√†u t√≠m */
            border-radius: 8px;
            margin-bottom: 12px;
            padding: 14px;
            transition: all 0.2s;
            font-size: 18px;
            font-weight: 600;
        }
        
        .answer-option:not(.disabled):hover {
            background-color: #f3e8ff; /* T√≠m nh·∫°t */
            transform: translateY(-2px);
            box-shadow: 2px 2px 0px #8b5cf6;
        }
        
        .disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* M√†u cho ƒë√°p √°n ƒë√∫ng/sai khi ƒë√£ ch·∫•m ƒëi·ªÉm */
        .correct {
            background-color: #bbf7d0; /* Green 200 */
            border-color: #10b981; /* Green 500 */
            box-shadow: 4px 4px 0px #10b981;
            color: #15803d; /* Text ƒë·∫≠m */
        }
        
        .wrong {
            background-color: #fecaca; /* Red 200 */
            border-color: #ef4444; /* Red 500 */
            box-shadow: 4px 4px 0px #ef4444;
            color: #b91c1c; /* Text ƒë·∫≠m */
        }

        /* Styling cho n√∫t b·∫•m */
        .action-button {
            border: 2px solid #1e3a8a;
            box-shadow: 4px 4px 0px #1e3a8a;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .action-button:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #1e3a8a;
        }
        
        /* B·ªô ƒë·∫øm th·ªùi gian (N·ªïi b·∫≠t) */
        .timer-display {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            font-weight: 800;
            border: 4px solid #ef4444; /* Vi·ªÅn ƒë·ªè */
            background-color: #fee2e2; /* N·ªÅn ƒë·ªè nh·∫°t */
            color: #dc2626; /* Ch·ªØ ƒë·ªè ƒë·∫≠m */
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.8);
            text-shadow: 1px 1px 0px #fff;
            transition: all 0.3s;
        }
        
        .timer-display.running {
            animation: pulse-red 1s infinite alternate;
        }

        .timer-display.warning {
            background-color: #fca5a5; /* Red 300 */
            border-color: #b91c1c;
            color: #b91c1c;
            font-size: 32px;
        }
        
        @keyframes pulse-red {
            from { box-shadow: 0 0 5px rgba(239, 68, 68, 0.5); }
            to { box-shadow: 0 0 15px rgba(239, 68, 68, 1); }
        }

        /* Responsive */
        @media (max-width: 640px) {
            body { font-size: 16px; }
            .header-title { font-size: 2.25rem; }
            .answer-option { font-size: 16px; padding: 10px; }
            .timer-display { width: 80px; height: 80px; font-size: 24px; }
            .card { box-shadow: 5px 5px 0px rgba(59, 130, 246, 0.7); }
        }
    </style>
</head>
<body>

    <div id="app-container" class="max-w-4xl w-full card p-8 sm:p-10">

        <h1 class="header-title text-4xl sm:text-5xl text-center mb-4">
            Tr·∫Øc Nghi·ªám L·ªãch S·ª≠ ƒê·ªãa Ph∆∞∆°ng 11
        </h1>
        <p class="text-center text-xl font-medium text-indigo-700 mb-6">
            T√¨m hi·ªÉu v·ªÅ **S∆°n Nam** v√† **Tr·∫ßn B·∫°ch ƒê·∫±ng**
        </p>
        
        <!-- N√∫t ƒê·∫£o V·ªã Tr√≠ C√¢u H·ªèi & ƒê√°p √Ån -->
        <div class="flex justify-center mb-8">
            <button id="shuffle-btn" 
                    class="action-button bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-6 rounded-lg text-lg w-full sm:w-auto transition-colors duration-200">
                üîÄ ƒê·∫£o V·ªã Tr√≠ C√¢u H·ªèi & ƒê√°p √Ån
            </button>
        </div>

        <!-- Thanh chuy·ªÉn ƒë·ªïi m·ª•c (Tabs) -->
        <div class="flex border-b-4 border-indigo-200 mb-8 rounded-t-lg overflow-hidden">
            <button id="tab-son-nam" 
                    class="tab-button flex-1 py-3 px-4 text-xl font-bold text-center transition-all duration-300 focus:outline-none bg-indigo-500 text-white shadow-inner"
                    data-section="son_nam">
                <span>S∆°n Nam (15 c√¢u)</span>
            </button>
            <button id="tab-tran-bach-dang" 
                    class="tab-button flex-1 py-3 px-4 text-xl font-bold text-center text-gray-700 transition-all duration-300 focus:outline-none bg-white hover:bg-gray-100"
                    data-section="tran_bach_dang">
                <span>Tr·∫ßn B·∫°ch ƒê·∫±ng (15 c√¢u)</span>
            </button>
        </div>

        <!-- Khu v·ª±c hi·ªÉn th·ªã c√¢u h·ªèi -->
        <div id="quiz-container">
            <!-- Questions will be rendered here -->
        </div>

        <!-- Khu v·ª±c n√∫t h√†nh ƒë·ªông v√† k·∫øt qu·∫£ -->
        <div id="results-area" class="mt-10 pt-6 border-t-2 border-dashed border-gray-300 flex flex-col justify-center items-center">
            
            <div id="score-display" class="text-3xl font-extrabold text-gray-800 mb-4 sm:mb-0 flex items-center">
                <span class="text-indigo-600 mr-2">üìä ƒêi·ªÉm:</span><span id="current-score">0</span> / <span id="total-questions">15</span>
            </div>

            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 mt-6 w-full sm:w-auto">
                <button id="reset-quiz-btn" 
                        class="action-button bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-8 rounded-lg text-xl w-full sm:w-auto transition-colors duration-200">
                    L√†m l·∫°i (Reset)
                </button>
            </div>
        </div>
        
        <!-- Custom Alert Box -->
        <div id="custom-alert" class="fixed inset-0 bg-gray-900 bg-opacity-80 hidden items-center justify-center p-4 z-50">
            <div class="bg-white rounded-xl p-8 max-w-md w-full shadow-2xl border-4 border-indigo-600">
                <h3 class="text-2xl font-bold text-indigo-700 mb-4">üîî Th√¥ng b√°o</h3>
                <p id="alert-message" class="text-gray-700 text-lg mb-6"></p>
                <button id="alert-ok-btn" class="action-button bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg float-right">
                    ƒê√£ hi·ªÉu
                </button>
            </div>
        </div>
    </div>

    <script>
        // Khai b√°o d·ªØ li·ªáu tr·∫Øc nghi·ªám
        const quizData = {
            son_nam: [
                { id: 1, question: "T√äN TH·∫¨T C·ª¶A NH√Ä VƒÇN S∆†N NAM L√Ä G√å?", answers: { A: "PH·∫†M MINH T·∫¶Y", B: "ƒê√îNG TH√ÅI", C: "PH·∫†M MINH T√ÄY", D: "ƒê√îNG TH√ÅI ‚Äì PH·∫†M MINH T√ÄY", E: "PH·∫†M MINH T√ÄY" }, correct: "E" },
                { id: 2, question: "√îNG S∆†N NAM SINH NƒÇM BAO NHI√äU?", answers: { A: "1915", B: "1920", C: "1926", D: "1930", E: "1935" }, correct: "C" },
                { id: 3, question: "√îNG S∆†N NAM QU√ä ·ªû ƒê√ÇU?", answers: { A: "R·∫†CH GI√Å, KI√äN GIANG", B: "C√Ä MAU", C: "S√ìC TRƒÇNG", D: "M·ª∏ THO", E: "AN GIANG" }, correct: "A" },
                { id: 4, question: "BI·ªÜT DANH C·ª¶A √îNG S∆†N NAM L√Ä G√å?", answers: { A: "√îNG GI√Ä NAM B·ªò", B: "NH√Ä NAM B·ªò H·ªåC", C: "NH√Ä VƒÇN H√ìA PH∆Ø∆†NG NAM", D: "NH√Ä S∆ØU T·∫¶M D√ÇN GIAN", E: "NH√Ä NH√ÇN H·ªåC MI·ªÄN T√ÇY" }, correct: "B" },
                { id: 5, question: "T√ÅC PH·∫®M N·ªîI TI·∫æNG NH·∫§T C·ª¶A S∆†N NAM L√Ä G√å?", answers: { A: "H∆Ø∆†NG R·ª™NG C√Ä MAU", B: "CHIM QUY√äN XU·ªêNG ƒê·∫§T", C: "V·∫†CH M·ªòT CH√ÇN TR·ªúI", D: "H√åNH B√ìNG C≈®", E: "CON ƒê√í TH·ª¶ THI√äM" }, correct: "A" },
                { id: 6, question: "TH·ªÇ LO·∫†I CH·ª¶ Y·∫æU TRONG S√ÅNG T√ÅC C·ª¶A √îNG L√Ä G√å?", answers: { A: "TI·ªÇU THUY·∫æT", B: "TRUY·ªÜN NG·∫ÆN", C: "K√ç", D: "TH∆†", E: "TI·ªÇU LU·∫¨N" }, correct: "C" },
                { id: 7, question: "√îNG S∆†N NAM TH∆Ø·ªúNG VI·∫æT V·ªÄ ƒê·ªÄ T√ÄI G√å?", answers: { A: "NG∆Ø·ªúI NAM B·ªò", B: "CHI·∫æN TRANH", C: "T√åNH Y√äU", D: "T√ÇM LINH", E: "VƒÇN H√ìA KINH T·∫æ" }, correct: "A" },
                { id: 8, question: "NH√Ä VƒÇN S∆†N NAM ƒê∆Ø·ª¢C M·ªÜNH DANH L√Ä G√å?", answers: { A: "NH√Ä NAM B·ªò H·ªåC", B: "NH√Ä NAM B·ªò L·ªåC", C: "NH√Ä NAM H·ªåC", D: "NH√Ä NAM S·ª¨", E: "NH√Ä VƒÇN H√ìA NAM B·ªò" }, correct: "A" },
                { id: 9, question: "√îNG NH·∫¨N GI·∫¢I MAI V√ÄNG NƒÇM N√ÄO?", answers: { A: "1997", B: "1998", C: "1999", D: "2000", E: "2001" }, correct: "C" },
                { id: 10, question: "NH·ªÆNG T√ÅC PH·∫®M N·ªîI B·∫¨T C·ª¶A S∆†N NAM?", answers: { A: "H∆Ø∆†NG R·ª™NG C√Ä MAU, H√åNH B√ìNG C≈®", B: "V·∫†CH M·ªòT CH√ÇN TR·ªúI, L√öA REO", C: "CHIM QUY√äN XU·ªêNG ƒê·∫§T, CON ƒê√í TH·ª¶ THI√äM", D: "C·∫¢ A V√Ä B", E: "C·∫¢ A, B, C" }, correct: "E" },
                { id: 11, question: "S∆†N NAM QUA ƒê·ªúI NƒÇM N√ÄO?", answers: { A: "2006", B: "2007", C: "2008", D: "2009", E: "2010" }, correct: "C" },
                { id: 12, question: "√îNG L√Ä NG∆Ø·ªúI G·∫ÆN B√ì V·ªöI KHU V·ª∞C N√ÄO NHI·ªÄU NH·∫§T?", answers: { A: "MI·ªÄN T√ÇY NAM B·ªò", B: "ƒê√îNG NAM B·ªò", C: "TRUNG B·ªò", D: "B·∫ÆC B·ªò", E: "T√ÇY NGUY√äN" }, correct: "A" },
                { id: 13, question: "T√ÅC PH·∫®M 'H∆Ø∆†NG R·ª™NG C√Ä MAU' ƒê∆Ø·ª¢C XEM L√Ä T·∫¨P G√å?", answers: { A: "TRUY·ªÜN NG·∫ÆN", B: "TI·ªÇU THUY·∫æT", C: "K√ç S·ª∞", D: "T√ôY B√öT", E: "H·ªíI K√ç" }, correct: "A" },
                { id: 14, question: "NH√Ä VƒÇN S∆†N NAM M·∫§T T·∫†I ƒê√ÇU?", answers: { A: "TH√ÄNH PH·ªê H·ªí CH√ç MINH", B: "C√Ä MAU", C: "R·∫†CH GI√Å", D: "H√Ä N·ªòI", E: "M·ª∏ THO" }, correct: "A" },
                { id: 15, question: "PHONG C√ÅCH S√ÅNG T√ÅC C·ª¶A √îNG TH∆Ø·ªúNG ƒê∆Ø·ª¢C NH·∫¨N X√âT NH∆Ø TH·∫æ N√ÄO?", answers: { A: "M·ªòC M·∫†C, GI·∫¢N D·ªä, ƒê·∫¨M CH·∫§T NAM B·ªò", B: "H√ÄO HOA, B√ìNG B·∫®Y", C: "L√ÉNG M·∫†N, BAY B·ªîNG", D: "H√ÄI H∆Ø·ªöC, TR√ÄO PH√öNG", E: "TR·ªÆ T√åNH, U M·ªä" }, correct: "A" }
            ],
            tran_bach_dang: [
                { id: 16, question: "T√äN TH·∫¨T C·ª¶A TR·∫¶N B·∫†CH ƒê·∫∞NG L√Ä G√å?", answers: { A: "TR∆Ø∆†NG GIA T·∫§N", B: "TR∆Ø∆†NG GIA TI√äU", C: "TR∆Ø∆†NG GIA TRI·ªÄU", D: "TR∆Ø·ªúNG GI√Å TR·∫¶N", E: "TR∆Ø·ªúNG GI·∫¢ B·∫¢O" }, correct: "A" },
                { id: 17, question: "√îNG SINH NƒÇM BAO NHI√äU?", answers: { A: "1924", B: "1925", C: "1926", D: "1927", E: "1928" }, correct: "B" },
                { id: 18, question: "√îNG QU√ä ·ªû ƒê√ÇU?", answers: { A: "L√ÄNG TH·∫†NH H∆ØNG, GI·ªíNG RI·ªÄNG, R·∫†CH GI√Å", B: "L√ÄNG H∆ØNG TH·ªäNH, R·∫†CH GI√Å", C: "C·∫¶N TH∆†", D: "M·ª∏ THO", E: "AN GIANG" }, correct: "A" },
                { id: 19, question: "TR·∫¶N B·∫†CH ƒê·∫∞NG THAM GIA C√ÅCH M·∫†NG T·ª™ KHI N√ÄO?", answers: { A: "15 TU·ªîI", B: "16 TU·ªîI", C: "17 TU·ªîI", D: "18 TU·ªîI", E: "19 TU·ªîI" }, correct: "B" },
                { id: 20, question: "C√îNG T√ÅC B√ÅO CH√ç √îNG G·∫ÆN B√ì V·ªöI T·ªú B√ÅO N√ÄO?", answers: { A: "B√ÅO S√ÄI G√íN GI·∫¢I PH√ìNG", B: "B√ÅO NH√ÇN D√ÇN", C: "B√ÅO THANH NI√äN", D: "B√ÅO TU·ªîI TR·∫∫", E: "B√ÅO TI·ªÄN PHONG" }, correct: "A" },
                { id: 21, question: "T√ÅC PH·∫®M N·ªîI TI·∫æNG NH·∫§T C·ª¶A √îNG L√Ä G√å?", answers: { A: "V√ÅN B√ÄI L·∫¨T NG·ª¨A", B: "B√ç TH∆Ø T·ªàNH ·ª¶Y", C: "CH√ÇN DUNG M·ªòT QU·∫¢N ƒê·ªêC", D: "B√ÅC S√ÅU R·ªíNG", E: "NG√ÄY V·ªÄ C·ª¶A NGO·∫†I" }, correct: "A" },
                { id: 22, question: "B√öT DANH C·ª¶A √îNG L√Ä G√å?", answers: { A: "T∆Ø √ÅNH", B: "H∆Ø∆†NG TRI·ªÄU", C: "NGUY·ªÑN TR∆Ø·ªúNG THI√äN L√ù", D: "C·∫¢ A, B, C", E: "KH√îNG C√ì" }, correct: "D" },
                { id: 23, question: "√îNG T·ª™NG GI·ªÆ CH·ª®C V·ª§ G√å SAU 1975?", answers: { A: "B√ç TH∆Ø TH√ÄNH ·ª¶Y TP.HCM", B: "CH·ª¶ T·ªäCH UBND TP.HCM", C: "PH√ì T·ªîNG BI√äN T·∫¨P B√ÅO NH√ÇN D√ÇN", D: "GI√ÅM ƒê·ªêC NH√Ä XU·∫§T B·∫¢N TR·∫∫", E: "CH·ª¶ NHI·ªÜM ·ª¶Y BAN VƒÇN H√ìA" }, correct: "A" },
                { id: 24, question: "√îNG M·∫§T NƒÇM N√ÄO?", answers: { A: "2005", B: "2006", C: "2007", D: "2008", E: "2009" }, correct: "C" },
                { id: 25, question: "√îNG M·∫§T DO NGUY√äN NH√ÇN G√å?", answers: { A: "UNG TH∆Ø PH·ªîI", B: "B·ªÜNH TIM", C: "TAI N·∫†N", D: "TU·ªîI GI√Ä", E: "B·ªÜNH GAN" }, correct: "A" },
                { id: 26, question: "T√ÅC PH·∫®M N√ÄO C·ª¶A √îNG ƒê∆Ø·ª¢C CHUY·ªÇN TH·ªÇ TH√ÄNH PHIM N·ªîI TI·∫æNG?", answers: { A: "V√ÅN B√ÄI L·∫¨T NG·ª¨A", B: "B√ç TH∆Ø T·ªàNH ·ª¶Y", C: "CH√ÇN DUNG M·ªòT QU·∫¢N ƒê·ªêC", D: "B√ÅC S√ÅU R·ªíNG", E: "ƒê·∫§T PH∆Ø∆†NG NAM" }, correct: "A" },
                { id: 27, question: "√îNG ƒê∆Ø·ª¢C BI·∫æT ƒê·∫æN L√Ä NG∆Ø·ªúI NH∆Ø TH·∫æ N√ÄO?", answers: { A: "KI√äN TRUNG, S·∫ÆC S·∫¢O, GI·∫¢N D·ªä", B: "ƒêI·ªÄM ƒê·∫†M, H√ÄI H∆Ø·ªöC", C: "H√ÄO HOA, B√ìNG B·∫®Y", D: "L√ÉNG M·∫†N, T·ª∞ TIN", E: "U M·ªä, TR·ªÆ T√åNH" }, correct: "A" },
                { id: 28, question: "√îNG C√ì ƒê√ìNG G√ìP G√å CHO Lƒ®NH V·ª∞C VƒÇN H√ìA?", answers: { A: "BI√äN SO·∫†N C√ÅC ƒê·ªäA CH√ç V√Ä L·ªäCH S·ª¨ NAM B·ªò", B: "VI·∫æT TH∆†", C: "D·ªäCH VƒÇN H·ªåC PH√ÅP", D: "VI·∫æT TRUY·ªÜN THI·∫æU NHI", E: "VI·∫æT K·ªäCH" }, correct: "A" },
                { id: 29, question: "M·ªòT TRONG NH·ªÆNG ƒê·∫∂C ƒêI·ªÇM CH√çNH TRONG S√ÅNG T√ÅC C·ª¶A √îNG L√Ä G√å?", answers: { A: "T√çNH CH√çNH LU·∫¨N, HI·ªÜN TH·ª∞C, G·∫ÆN V·ªöI C√ÅCH M·∫†NG", B: "T√çNH TR·ªÆ T√åNH, L√ÉNG M·∫†N", C: "T√çNH H√ÄI H∆Ø·ªöC", D: "T√çNH PHI√äU L∆ØU", E: "T√çNH GI·∫¢ T∆Ø·ªûNG" }, correct: "A" },
                { id: 30, question: "T√ÅC PH·∫®M 'V√ÅN B√ÄI L·∫¨T NG·ª¨A' C·ª¶A √îNG MI√äU T·∫¢ NH√ÇN V·∫¨T N√ÄO?", answers: { A: "ƒêI·ªÜP VI√äN T√åNH B√ÅO PH·∫†M NG·ªåC TH·∫¢O", B: "TR·∫¶N PH√ö", C: "V√ï NGUY√äN GI√ÅP", D: "PH·∫†M H·ªíNG TH√ÅI", E: "TR·∫¶N VƒÇN TR√Ä" }, correct: "A" }
            ]
        };

        let currentSection = 'son_nam';
        let userAnswers = {}; // L∆∞u tr·ªØ ƒë√°p √°n ƒë√£ tr·∫£ l·ªùi: { 'q-1': { answer: 'A', correct: true } }
        let questionTimers = {}; // { qId: intervalId }
        // Bi·∫øn l∆∞u tr·ªØ th·ª© t·ª± hi·ªán t·∫°i c·ªßa c√°c c√¢u h·ªèi (sau khi x√°o tr·ªôn ho·∫∑c nguy√™n b·∫£n)
        let currentQuizOrder = {}; 

        const quizContainer = document.getElementById('quiz-container');
        const scoreDisplay = document.getElementById('current-score');
        const totalQuestions = document.getElementById('total-questions');
        const tabs = document.querySelectorAll('.tab-button');
        const resetQuizBtn = document.getElementById('reset-quiz-btn');
        const shuffleBtn = document.getElementById('shuffle-btn'); // N√∫t x√°o tr·ªôn

        const customAlert = document.getElementById('custom-alert');
        const alertMessage = document.getElementById('alert-message');
        const alertOkBtn = document.getElementById('alert-ok-btn');

        const initialTime = 60; // 60 gi√¢y cho m·ªói c√¢u h·ªèi

        // --- C√°c h√†m ti·ªán √≠ch ---

        // H√†m x√°o tr·ªôn m·∫£ng (thu·∫≠t to√°n Fisher-Yates)
        function shuffleArray(array) {
            let currentIndex = array.length, randomIndex;
            let newArray = [...array]; // Clone m·∫£ng ƒë·ªÉ kh√¥ng thay ƒë·ªïi d·ªØ li·ªáu g·ªëc
            
            while (currentIndex !== 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [newArray[currentIndex], newArray[randomIndex]] = [
                    newArray[randomIndex], newArray[currentIndex]
                ];
            }
            return newArray;
        }

        // H√†m hi·ªÉn th·ªã h·ªôp tho·∫°i th√¥ng b√°o t√πy ch·ªânh
        function showAlert(message) {
            alertMessage.textContent = message;
            customAlert.classList.remove('hidden');
            customAlert.classList.add('flex');
        }

        // ƒê√≥ng h·ªôp tho·∫°i th√¥ng b√°o
        alertOkBtn.addEventListener('click', () => {
            customAlert.classList.add('hidden');
            customAlert.classList.remove('flex');
        });

        // --- C√°c h√†m logic Quiz ---

        // H√†m l·∫•y danh s√°ch c√¢u h·ªèi hi·ªán t·∫°i (ƒë√£ x√°o tr·ªôn ho·∫∑c nguy√™n b·∫£n)
        function getCurrentQuestions(isInitial = false) {
            // N·∫øu isInitial l√† true ho·∫∑c ch∆∞a c√≥ th·ª© t·ª± n√†o ƒë∆∞·ª£c l∆∞u cho section n√†y
            if (isInitial || !currentQuizOrder[currentSection]) {
                const originalQuestions = quizData[currentSection];
                
                // Kh·ªüi t·∫°o c·∫•u tr√∫c shuffled_options cho l·∫ßn ƒë·∫ßu
                const structuredQuestions = originalQuestions.map(q => {
                    const keys = Object.keys(q.answers);
                    const originalOptions = {};
                    // Duy tr√¨ th·ª© t·ª± ban ƒë·∫ßu cho ƒë·∫øn khi c√≥ y√™u c·∫ßu x√°o tr·ªôn
                    keys.forEach((originalKey, index) => {
                        const displayKey = String.fromCharCode(65 + index);
                        originalOptions[displayKey] = {
                            text: q.answers[originalKey],
                            originalKey: originalKey // L∆∞u l·∫°i key g·ªëc ƒë·ªÉ ch·∫•m ƒëi·ªÉm
                        };
                    });
                    return { ...q, shuffled_options: originalOptions };
                });
                
                // L∆∞u l·∫°i v√† tr·∫£ v·ªÅ
                currentQuizOrder[currentSection] = structuredQuestions;
            }
            return currentQuizOrder[currentSection];
        }


        // H√†m x√°o tr·ªôn th·ª© t·ª± c√¢u h·ªèi v√† c√°c l·ª±a ch·ªçn ƒë√°p √°n
        function shuffleQuestionsAndOptions() {
            // 1. D·ª´ng t·∫•t c·∫£ c√°c timer ƒëang ch·∫°y
            for (const qId in questionTimers) {
                stopTimer(parseInt(qId));
            }

            // 2. L·∫•y danh s√°ch c√¢u h·ªèi ƒë√£ ƒë∆∞·ª£c c·∫•u tr√∫c (c√≥ shuffled_options)
            const questionsToShuffle = getCurrentQuestions(true); 
            
            // 3. X√°o tr·ªôn th·ª© t·ª± c√¢u h·ªèi
            const shuffledQuestions = shuffleArray(questionsToShuffle);

            // 4. X√°o tr·ªôn c√°c l·ª±a ch·ªçn ƒë√°p √°n trong m·ªói c√¢u
            const fullyShuffledQuiz = shuffledQuestions.map(q => {
                // L·∫•y c√°c key hi·ªÉn th·ªã (A, B, C, D, E)
                const displayKeys = Object.keys(q.shuffled_options);
                
                // L·∫•y c√°c ƒë·ªëi t∆∞·ª£ng option (ch·ª©a text v√† originalKey)
                const optionObjects = displayKeys.map(key => q.shuffled_options[key]);
                
                // X√°o tr·ªôn c√°c ƒë·ªëi t∆∞·ª£ng option
                const shuffledOptionObjects = shuffleArray(optionObjects);

                // T·∫°o l·∫°i ƒë·ªëi t∆∞·ª£ng shuffled_options v·ªõi key A, B, C... m·ªõi
                const newShuffledOptions = {};
                shuffledOptionObjects.forEach((optionData, index) => {
                    const newDisplayKey = String.fromCharCode(65 + index); 
                    newShuffledOptions[newDisplayKey] = optionData;
                });
                
                // Tr·∫£ v·ªÅ c√¢u h·ªèi v·ªõi l·ª±a ch·ªçn ƒë√°p √°n ƒë√£ ƒë∆∞·ª£c x√°o tr·ªôn
                return {
                    ...q,
                    shuffled_options: newShuffledOptions
                };
            });
            
            // C·∫≠p nh·∫≠t th·ª© t·ª± hi·ªÉn th·ªã
            currentQuizOrder[currentSection] = fullyShuffledQuiz;
            
            // Rerender quiz
            renderQuiz();
            showAlert('ƒê√£ ƒë·∫£o v·ªã tr√≠ th√†nh c√¥ng! Th·ª© t·ª± c√¢u h·ªèi v√† c√°c l·ª±a ch·ªçn ƒë√°p √°n ƒë√£ ƒë∆∞·ª£c tr·ªôn ng·∫´u nhi√™n.');
        }

        // H√†m t√≠nh l·∫°i t·ªïng ƒëi·ªÉm
        function calculateTotalScore() {
            let score = 0;
            const questions = getCurrentQuestions();
            questions.forEach(q => {
                const answeredData = userAnswers[`q-${q.id}`];
                if (answeredData && answeredData.correct) {
                    score++;
                }
            });
            return score;
        }

        // C·∫≠p nh·∫≠t hi·ªÉn th·ªã ƒëi·ªÉm
        function updateScoreDisplay() {
            const questions = getCurrentQuestions();
            const currentScore = calculateTotalScore();
            scoreDisplay.textContent = currentScore;
            totalQuestions.textContent = questions.length;
        }

        // H√†m d·ª´ng ƒë·ªìng h·ªì
        function stopTimer(questionId) {
            if (questionTimers[questionId]) {
                clearInterval(questionTimers[questionId]);
                delete questionTimers[questionId];
            }
        }

        // H√†m b·∫Øt ƒë·∫ßu ƒë·ªìng h·ªì
        function startTimer(qId) {
            stopTimer(qId);
            let timeLeft = initialTime;
            const timerElement = document.getElementById(`timer-${qId}`);
            const startButton = document.getElementById(`start-btn-${qId}`);
            const questionOptionsContainer = document.querySelector(`.question-options-container[data-question-id="${qId}"]`);
            const feedbackElement = document.getElementById(`feedback-${qId}`);

            if (!timerElement || !startButton || !questionOptionsContainer) return;

            // ·∫®n n√∫t B·∫Øt ƒë·∫ßu
            startButton.style.display = 'none';

            // C·∫≠p nh·∫≠t tr·∫°ng th√°i hi·ªÉn th·ªã c·ªßa Timer
            timerElement.textContent = `${timeLeft}s`;
            timerElement.classList.remove('hidden', 'bg-gray-400', 'border-gray-600', 'text-gray-800');
            timerElement.classList.add('flex', 'running'); 
            timerElement.classList.remove('warning'); 

            // K√≠ch ho·∫°t c√°c l·ª±a ch·ªçn ƒë√°p √°n
            questionOptionsContainer.classList.remove('disabled');

            questionTimers[qId] = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `${timeLeft}s`;

                if (timeLeft <= 10) {
                    timerElement.classList.add('warning');
                } else {
                    timerElement.classList.remove('warning');
                }

                if (timeLeft <= 0) {
                    stopTimer(qId);
                    
                    questionOptionsContainer.classList.add('disabled');
                    timerElement.textContent = 'H·∫øt gi·ªù!';
                    timerElement.classList.remove('running', 'warning');
                    timerElement.classList.add('bg-gray-400', 'border-gray-600', 'text-gray-800');
                    
                    const questions = getCurrentQuestions();
                    const questionData = questions.find(q => q.id === qId);

                    if (!userAnswers[`q-${qId}`]) {
                         userAnswers[`q-${qId}`] = { answer: null, correct: false, timedOut: true };
                         // T√¨m display key ƒë√∫ng ƒë·ªÉ hi·ªÉn th·ªã trong feedback
                         const correctDisplayKey = Object.keys(questionData.shuffled_options).find(
                            key => questionData.shuffled_options[key].originalKey === questionData.correct
                         );
                         feedbackElement.innerHTML = `<p class="mt-3 text-red-600 font-bold text-lg">‚ùå **H·∫øt gi·ªù!** ƒê√°p √°n ƒë√∫ng l√† **${correctDisplayKey}**.</p>`;
                         renderCorrectAnswer(qId);
                    }
                    
                    const questionNumber = questions.findIndex(q => q.id === qId) + 1;
                    showAlert(`H·∫øt gi·ªù cho C√¢u h·ªèi s·ªë ${questionNumber}!`);
                }
            }, 1000);
        }

        // H√†m hi·ªÉn th·ªã ƒë√°p √°n ƒë√∫ng sau khi tr·∫£ l·ªùi sai ho·∫∑c h·∫øt gi·ªù
        function renderCorrectAnswer(qId) {
            const questions = getCurrentQuestions();
            const question = questions.find(q => q.id === qId);
            if (!question) return;

            // T√¨m display key ƒë√∫ng (A, B, C...)
            const correctDisplayKey = Object.keys(question.shuffled_options).find(
                key => question.shuffled_options[key].originalKey === question.correct
            );

            const correctOption = document.querySelector(`.answer-option[data-question-id="${qId}"][data-answer="${correctDisplayKey}"]`);

            if (correctOption) {
                 // ƒê·∫£m b·∫£o ƒë√°p √°n ƒë√∫ng ƒë∆∞·ª£c l√†m n·ªïi b·∫≠t (n·∫øu ch∆∞a ƒë∆∞·ª£c ch·ªçn)
                correctOption.classList.add('correct');
                const optionData = question.shuffled_options[correctDisplayKey];
                correctOption.innerHTML = `<span class="font-bold mr-3 text-indigo-700">${correctDisplayKey}.</span> <span class="flex-1 text-gray-700">${optionData.text}</span> 
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600 ml-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>`;
            }

            updateScoreDisplay();
        }

        // X·ª≠ l√Ω s·ª± ki·ªán ch·ªçn ƒë√°p √°n v√† ch·∫•m ƒëi·ªÉm t·ª©c th√¨
        function handleAnswerSelection(event) {
            const selectedOption = event.currentTarget;
            const questionId = parseInt(selectedOption.dataset.questionId);
            const displayKey = selectedOption.dataset.answer; // Display key (A, B, C...)
            const questionOptionsContainer = document.querySelector(`.question-options-container[data-question-id="${questionId}"]`);
            const feedbackElement = document.getElementById(`feedback-${questionId}`);
            
            const questions = getCurrentQuestions();
            const questionData = questions.find(q => q.id === questionId);
            
            if (!questionOptionsContainer || questionOptionsContainer.classList.contains('disabled')) {
                showAlert("Vui l√≤ng nh·∫•n 'B·∫Øt ƒë·∫ßu' ƒë·ªÉ k√≠ch ho·∫°t b·ªô ƒë·∫øm th·ªùi gian.");
                return; 
            }
            
            // D·ª´ng timer ngay l·∫≠p t·ª©c
            stopTimer(questionId);
            document.getElementById(`timer-${questionId}`).classList.remove('running', 'warning');
            document.getElementById(`timer-${questionId}`).textContent = 'ƒê√£ xong';

            // V√¥ hi·ªáu h√≥a l·ª±a ch·ªçn cho c√¢u h·ªèi n√†y
            questionOptionsContainer.classList.add('disabled');
            
            // L·∫•y d·ªØ li·ªáu ƒë√°p √°n ƒë√£ x√°o tr·ªôn
            const selectedOptionData = questionData.shuffled_options[displayKey];
            const selectedOriginalKey = selectedOptionData.originalKey; 
            
            // Ki·ªÉm tra t√≠nh ƒë√∫ng ƒë·∫Øn d·ª±a tr√™n originalKey
            const isCorrect = selectedOriginalKey === questionData.correct;
            
            // L∆∞u k·∫øt qu·∫£ (l∆∞u displayKey m√† ng∆∞·ªùi d√πng ƒë√£ ch·ªçn)
            userAnswers[`q-${questionId}`] = { answer: displayKey, correct: isCorrect, timedOut: false };

            // T√¨m display key ƒë√∫ng ƒë·ªÉ hi·ªÉn th·ªã feedback
            const correctDisplayKey = Object.keys(questionData.shuffled_options).find(
                key => questionData.shuffled_options[key].originalKey === questionData.correct
            );

            // Hi·ªÉn th·ªã feedback
            if (isCorrect) {
                selectedOption.classList.add('correct');
                feedbackElement.innerHTML = `
                    <p class="mt-3 text-green-600 font-extrabold text-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
                        üéâ **Ch√≠nh x√°c!**
                    </p>
                `;
            } else {
                selectedOption.classList.add('wrong');
                feedbackElement.innerHTML = `
                    <p class="mt-3 text-red-600 font-extrabold text-lg flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>
                        **Sai r·ªìi!** ƒê√°p √°n ƒë√∫ng l√† **${correctDisplayKey}**.
                    </p>
                `;
                renderCorrectAnswer(questionId); // Highlight ƒë√°p √°n ƒë√∫ng
            }

            // C·∫≠p nh·∫≠t t·ªïng ƒëi·ªÉm
            updateScoreDisplay();
        }

        // H√†m render c√¢u h·ªèi
        function renderQuiz() {
            const questions = getCurrentQuestions(); // L·∫•y danh s√°ch ƒë√£ ƒë∆∞·ª£c s·∫Øp x·∫øp/x√°o tr·ªôn
            totalQuestions.textContent = questions.length;
            quizContainer.innerHTML = '';

            questions.forEach((q, index) => {
                const questionNumber = index + 1;
                const globalQuestionId = q.id;
                const answeredData = userAnswers[`q-${globalQuestionId}`];
                const isAnswered = !!answeredData;
                
                // T√¨m display key ƒë√∫ng (A, B, C...) ƒë·ªÉ s·ª≠ d·ª•ng trong feedback
                const correctDisplayKey = Object.keys(q.shuffled_options).find(
                    key => q.shuffled_options[key].originalKey === q.correct
                );
                
                const qDiv = document.createElement('div');
                qDiv.className = 'question-card bg-white p-6 rounded-xl mb-8';
                
                // Hi·ªÉn th·ªã ph·∫ßn c√¢u h·ªèi, timer v√† n√∫t Start
                let timerHtml = `
                    <div class="flex flex-col sm:flex-row justify-between items-center mb-6 border-b pb-4 border-gray-200">
                        <p class="text-xl sm:text-2xl font-extrabold text-gray-800 flex-1 mb-4 sm:mb-0">
                            <span class="text-indigo-600 mr-3">${questionNumber}.</span> ${q.question}
                        </p>
                        
                        <div class="flex flex-col items-center justify-center space-y-2">
                            <!-- Hi·ªÉn th·ªã Timer ho·∫∑c n√∫t Start -->
                            ${!isAnswered ? `
                                <div id="timer-${globalQuestionId}" class="timer-display hidden">60s</div>
                                <button id="start-btn-${globalQuestionId}" 
                                        data-id="${globalQuestionId}" 
                                        class="start-timer-btn action-button bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors duration-200">
                                    ‚ñ∂ B·∫Øt ƒë·∫ßu (60s)
                                </button>
                            ` : `
                                <div id="timer-${globalQuestionId}" class="timer-display bg-gray-200 border-gray-400 text-gray-700">ƒê√£ xong</div>
                            `}
                        </div>
                    </div>
                `;

                qDiv.innerHTML += timerHtml;
                
                // Khu v·ª±c ch·ª©a c√°c l·ª±a ch·ªçn ƒë√°p √°n (ƒë√£ x√°o tr·ªôn)
                const optionsDiv = document.createElement('div');
                optionsDiv.className = `question-options-container ${isAnswered ? 'disabled' : 'disabled'} mt-4` ;
                optionsDiv.dataset.questionId = globalQuestionId;

                // L·∫∑p qua c√°c displayKey (A, B, C, D, E) ƒë√£ x√°o tr·ªôn
                for (const displayKey in q.shuffled_options) {
                    const optionData = q.shuffled_options[displayKey];
                    const answerText = optionData.text;

                    const isSelected = isAnswered && answeredData.answer === displayKey;
                    const isCorrect = isAnswered && answeredData.correct && isSelected;
                    const isWrongSelection = isAnswered && !answeredData.correct && isSelected;
                    // Highlight ƒë√°p √°n ƒë√∫ng n·∫øu c√¢u tr·∫£ l·ªùi sai ho·∫∑c h·∫øt gi·ªù
                    const isCorrectHighlight = isAnswered && !answeredData.correct && displayKey === correctDisplayKey; 

                    let optionClass = 'answer-option flex items-center mb-2 transition-all';
                    
                    if (isCorrect || isCorrectHighlight) {
                        optionClass += ' correct';
                    } else if (isWrongSelection) {
                        optionClass += ' wrong';
                    } else if (isSelected) {
                        optionClass += ' bg-indigo-200 border-indigo-500';
                    } else {
                        optionClass += ' bg-white hover:bg-gray-50';
                    }

                    const iconHtml = (isCorrect || isCorrectHighlight) ? 
                        '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600 ml-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>' : 
                        (isWrongSelection ? '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600 ml-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>' : '');


                    const optionHtml = `
                        <div class="answer-option flex items-center mb-2 ${optionClass}" data-question-id="${globalQuestionId}" data-answer="${displayKey}">
                            <span class="font-bold mr-3 text-indigo-700">${displayKey}.</span> 
                            <span class="flex-1 text-gray-700">${answerText}</span>
                            ${iconHtml}
                        </div>
                    `;
                    optionsDiv.innerHTML += optionHtml;
                }
                
                qDiv.appendChild(optionsDiv);
                
                // Khu v·ª±c Feedback
                const feedbackDiv = document.createElement('div');
                feedbackDiv.id = `feedback-${globalQuestionId}`;
                feedbackDiv.className = 'feedback-area mt-4 pt-3 border-t border-dashed';
                
                if (isAnswered) {
                     if (answeredData.correct) {
                        feedbackDiv.innerHTML = `
                            <p class="mt-3 text-green-600 font-extrabold text-lg flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
                                üéâ **Ch√≠nh x√°c!**
                            </p>
                        `;
                    } else if (answeredData.timedOut) {
                        feedbackDiv.innerHTML = `<p class="mt-3 text-red-600 font-extrabold text-lg">‚ùå **H·∫øt gi·ªù!** ƒê√°p √°n ƒë√∫ng l√† **${correctDisplayKey}**.</p>`;
                    }
                     else {
                         feedbackDiv.innerHTML = `
                            <p class="mt-3 text-red-600 font-extrabold text-lg flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>
                                **Sai r·ªìi!** ƒê√°p √°n ƒë√∫ng l√† **${correctDisplayKey}**.
                            </p>
                        `;
                    }
                }
                
                qDiv.appendChild(feedbackDiv);
                quizContainer.appendChild(qDiv);
            });
            
            // G·∫Øn l·∫°i event listener
            attachEventListeners();
        }

        // G·∫Øn t·∫•t c·∫£ event listeners
        function attachEventListeners() {
            document.querySelectorAll('.answer-option').forEach(option => {
                const qId = parseInt(option.dataset.questionId);
                if (!userAnswers[`q-${qId}`]) {
                    option.addEventListener('click', handleAnswerSelection);
                }
            });

            document.querySelectorAll('.start-timer-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const qId = parseInt(e.currentTarget.dataset.id);
                    startTimer(qId);
                });
            });
        }

        // X·ª≠ l√Ω chuy·ªÉn tab
        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                const newSection = e.currentTarget.dataset.section;
                if (newSection !== currentSection) {
                    // D·ª´ng t·∫•t c·∫£ c√°c timer ƒëang ch·∫°y khi chuy·ªÉn tab
                    for (const qId in questionTimers) {
                        stopTimer(parseInt(qId));
                    }

                    currentSection = newSection;
                    
                    tabs.forEach(t => {
                        if (t.dataset.section === currentSection) {
                            t.classList.remove('bg-white', 'hover:bg-gray-100', 'text-gray-700');
                            t.classList.add('bg-indigo-500', 'text-white', 'shadow-inner');
                        } else {
                            t.classList.remove('bg-indigo-500', 'text-white', 'shadow-inner');
                            t.classList.add('bg-white', 'hover:bg-gray-100', 'text-gray-700');
                        }
                    });

                    // Kh·ªüi t·∫°o th·ª© t·ª± quiz cho section m·ªõi n·∫øu ch∆∞a c√≥
                    getCurrentQuestions();

                    renderQuiz();
                    updateScoreDisplay();
                }
            });
        });


        // H√†m l√†m l·∫°i (Reset)
        function resetQuiz() {
            // D·ª´ng t·∫•t c·∫£ c√°c timer ƒëang ch·∫°y
            for (const qId in questionTimers) {
                stopTimer(parseInt(qId));
            }
            
            userAnswers = {};
            
            // ƒê·∫∑t l·∫°i th·ª© t·ª± hi·ªÉn th·ªã v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu (nh∆∞ng v·∫´n d√πng c·∫•u tr√∫c m·ªõi)
            currentQuizOrder[currentSection] = getCurrentQuestions(true); 
            
            renderQuiz(); 
            updateScoreDisplay();
            showAlert('ƒê√£ reset to√†n b·ªô c√¢u tr·∫£ l·ªùi v√† ƒëi·ªÉm s·ªë. B·∫°n c√≥ th·ªÉ b·∫Øt ƒë·∫ßu l·∫°i!');
        }

        // G·∫Øn s·ª± ki·ªán cho n√∫t l√†m l·∫°i v√† n√∫t x√°o tr·ªôn
        resetQuizBtn.addEventListener('click', resetQuiz);
        shuffleBtn.addEventListener('click', shuffleQuestionsAndOptions);

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        window.onload = function() {
            getCurrentQuestions(); // Kh·ªüi t·∫°o c·∫•u tr√∫c d·ªØ li·ªáu ban ƒë·∫ßu
            renderQuiz();
            updateScoreDisplay();
        };

    </script>
</body>
</html>
